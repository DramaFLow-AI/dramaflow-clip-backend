{
  "openapi": "3.0.0",
  "paths": {
    "/gemini/chat": {
      "post": {
        "description": "接收用户消息，返回 Gemini 模型生成的回复，包含 token 统计信息。",
        "operationId": "ChatController_handleChat",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatMessageParamsDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/ChatResponseDto",
                          "description": "Gemini结果",
                          "example": {
                            "content": "你好！很高兴你来这里。有什么我可以帮忙的吗？",
                            "usage": {
                              "promptTokens": 15,
                              "completionTokens": 25,
                              "totalTokens": 40
                            },
                            "model": "gemini-2.5-flash",
                            "responseTime": 1200
                          }
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "Gemini 聊天接口",
        "tags": [
          "Gemini 聊天与语音"
        ]
      }
    },
    "/gemini/stream": {
      "post": {
        "description": "使用 VertexAI Gemini 提供流式聊天服务，返回结构化响应数据，包含 token 统计信息",
        "operationId": "ChatController_handleChatStream",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatStreamRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "text/event-stream": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/StreamChatResponseDto"
                          },
                          "description": "流式响应数据"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "Gemini 流式聊天接口（SSE）",
        "tags": [
          "Gemini 聊天与语音"
        ]
      }
    },
    "/gemini/generate-voice": {
      "post": {
        "description": "支持多种 TTS 提供商的文字转语音服务，包括 Gemini TTS 和 MiniMax TTS",
        "operationId": "ChatController_handleGenerateVoice",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GenerateVoiceRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "type": "string",
                          "description": "音频文件访问地址",
                          "example": "https://example-bucket.oss-cn-shanghai.aliyuncs.com/audio/2025-12-05/output.wav"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "多提供商文本转语音接口",
        "tags": [
          "Gemini 聊天与语音"
        ]
      }
    },
    "/deepseek/chat": {
      "post": {
        "description": "接收用户消息，返回 DeepSeek 模型生成的回复，包含 token 统计信息。",
        "operationId": "DeepSeekController_handleDeepSeekChat",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenAIChatRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/ChatResponseDto",
                          "description": "DeepSeek结果",
                          "example": {
                            "content": "你好！我是DeepSeek，很高兴为您服务！",
                            "usage": {
                              "promptTokens": 18,
                              "completionTokens": 30,
                              "totalTokens": 48
                            },
                            "model": "deepseek/deepseek-v3.2",
                            "responseTime": 800
                          }
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "DeepSeek 聊天接口",
        "tags": [
          "DeepSeek 聊天"
        ]
      }
    },
    "/deepseek/stream": {
      "post": {
        "description": "使用 DeepSeek 模型提供流式聊天服务，返回结构化响应数据，包含 token 统计信息",
        "operationId": "DeepSeekController_handleDeepSeekStream",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatStreamRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "text/event-stream": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/StreamChatResponseDto"
                          },
                          "description": "DeepSeek 流式响应数据"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "DeepSeek 流式聊天接口（SSE）",
        "tags": [
          "DeepSeek 聊天"
        ]
      }
    },
    "/gpt/chat": {
      "post": {
        "description": "接收用户消息，返回 GPT 模型生成的回复，包含 token 统计信息。",
        "operationId": "GPTController_handleGPTChat",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenAIChatRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/ChatResponseDto",
                          "description": "GPT结果",
                          "example": {
                            "content": "你好！我是GPT，很高兴为您服务！",
                            "usage": {
                              "promptTokens": 16,
                              "completionTokens": 28,
                              "totalTokens": 44
                            },
                            "model": "pa/gt-4p",
                            "responseTime": 900
                          }
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "GPT 聊天接口",
        "tags": [
          "GPT 聊天"
        ]
      }
    },
    "/gpt/stream": {
      "post": {
        "description": "使用 GPT 模型提供流式聊天服务，返回结构化响应数据，包含 token 统计信息",
        "operationId": "GPTController_handleGPTStream",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatStreamRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "text/event-stream": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/StreamChatResponseDto"
                          },
                          "description": "GPT 流式响应数据"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "GPT 流式聊天接口（SSE）",
        "tags": [
          "GPT 聊天"
        ]
      }
    },
    "/vertexai-tts/voices": {
      "get": {
        "description": "查询所有可用的 VertexAI Text-to-Speech 语音，包括中文、英文、日文、韩文等多种语言。",
        "operationId": "VertexAITTSController_getVertexAIVoices",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/Object",
                          "description": "VertexAI TTS 语音列表",
                          "example": {
                            "chinese": {
                              "languageCode": "zh-CN",
                              "standard": [
                                {
                                  "name": "cm-CN-Standard-A",
                                  "description": "中文女声 (标准语音)",
                                  "gender": "female"
                                },
                                {
                                  "name": "cm-CN-Standard-B",
                                  "description": "中文女声 (标准语音)",
                                  "gender": "female"
                                },
                                {
                                  "name": "cm-CN-Standard-C",
                                  "description": "中文男声 (标准语音)",
                                  "gender": "male"
                                },
                                {
                                  "name": "cm-CN-Standard-D",
                                  "description": "中文女声 (标准语音)",
                                  "gender": "female"
                                }
                              ],
                              "wavenet": [
                                {
                                  "name": "cm-CN-Wavenet-A",
                                  "description": "中文女声 (高品质 WaveNet)",
                                  "gender": "female"
                                },
                                {
                                  "name": "cm-CN-Wavenet-B",
                                  "description": "中文男声 (高品质 WaveNet)",
                                  "gender": "male"
                                },
                                {
                                  "name": "cm-CN-Wavenet-C",
                                  "description": "中文女声 (高品质 WaveNet)",
                                  "gender": "female"
                                },
                                {
                                  "name": "cm-CN-Wavenet-D",
                                  "description": "中文男声 (高品质 WaveNet)",
                                  "gender": "male"
                                }
                              ]
                            },
                            "english": {
                              "languageCode": "en-US",
                              "standard": [
                                {
                                  "name": "en-US-Standard-A",
                                  "description": "美式女声 (标准语音)",
                                  "gender": "female"
                                },
                                {
                                  "name": "en-US-Standard-B",
                                  "description": "美式男声 (标准语音)",
                                  "gender": "male"
                                }
                              ],
                              "wavenet": [
                                {
                                  "name": "en-US-Wavenet-A",
                                  "description": "美式女声 (高品质 WaveNet)",
                                  "gender": "female"
                                },
                                {
                                  "name": "en-US-Wavenet-B",
                                  "description": "美式男声 (高品质 WaveNet)",
                                  "gender": "male"
                                }
                              ]
                            }
                          }
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "获取 VertexAI TTS 支持的语音列表",
        "tags": [
          "VertexAI TTS"
        ]
      }
    },
    "/vertexai-tts/generate": {
      "post": {
        "description": "使用 Google VertexAI Text-to-Speech 服务生成高质量语音，支持 Standard 和 WaveNet 语音。",
        "operationId": "VertexAITTSController_handleVertexAITTS",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VertexAiTTSRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/VertexAITSResponseDto",
                          "description": "VertexAI TTS 语音生成结果",
                          "example": {
                            "audioUrl": "https://example-bucket.oss-cn-shanghai.aliyuncs.com/audio/2025-12-04/vertexai-tts-1704312123456.wav",
                            "voiceName": "cm-CN-Wavenet-A",
                            "characterCount": 18,
                            "generationTime": 1200,
                            "sampleRate": 24000
                          }
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "VertexAI TTS 语音合成接口",
        "tags": [
          "VertexAI TTS"
        ]
      }
    },
    "/menu/menu-list": {
      "get": {
        "description": "返回菜单列表分页",
        "operationId": "MenuController_findAll",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/MenuItemDto"
                          },
                          "description": "返回数据"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "菜单列表",
        "tags": [
          "菜单"
        ]
      }
    },
    "/tts-task/create": {
      "post": {
        "description": "根据提供的方案数据批量创建语音合成任务，支持保留历史或覆盖模式两种创建方式",
        "operationId": "TtsTaskController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateTtsTaskDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/TaskExecuteDto",
                          "description": "返回数据"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "创建语音生成任务",
        "tags": [
          "语音生成"
        ]
      }
    },
    "/tts-task/update": {
      "put": {
        "description": "更新指定任务的文本内容并重新生成语音，支持同时更新多个任务",
        "operationId": "TtsTaskController_updateTasks",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateTtsTasksDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/TaskExecuteDto",
                          "description": "返回数据"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "更新语音任务",
        "tags": [
          "语音生成"
        ]
      }
    },
    "/tts-task/status": {
      "get": {
        "description": "查询指定方案下所有 TTS 任务的详细状态信息，包括任务进度、音频 URL 等",
        "operationId": "TtsTaskController_status",
        "parameters": [
          {
            "name": "schemeId",
            "required": true,
            "in": "query",
            "description": "方案 ID",
            "schema": {
              "example": 1,
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/SegmentDto"
                          },
                          "description": "返回数据"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "查询任务状态详情",
        "tags": [
          "语音生成"
        ]
      }
    },
    "/tts-task/overall-status": {
      "get": {
        "description": "查询指定方案的整体任务状态统计，包括成功、失败、待处理的任务数量",
        "operationId": "TtsTaskController_overallStatus",
        "parameters": [
          {
            "name": "schemeId",
            "required": true,
            "in": "query",
            "description": "方案 ID",
            "schema": {
              "example": "12345",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/OverallResponseDto",
                          "description": "返回数据"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "查询任务聚合状态",
        "tags": [
          "语音生成"
        ]
      }
    },
    "/tts-task/retry": {
      "post": {
        "description": "将指定的失败任务重新加入处理队列，可以指定新的语音名称和提供商配置",
        "operationId": "TtsTaskController_retry",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RetryFailedIndexesDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "summary": "重试失败任务",
        "tags": [
          "语音生成"
        ]
      }
    },
    "/upload/file": {
      "post": {
        "operationId": "UploadController_uploadFile",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "文件上传",
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/UploadFileDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/UploadFileResponseDto",
                          "description": "返回数据"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "上传单个文件到 OSS",
        "tags": [
          "文件上传"
        ]
      }
    }
  },
  "info": {
    "title": "Gemini Api 接口文档",
    "description": "基于 NestJS 实现的聊天与语音生成 API 服务",
    "version": "1.0.0",
    "contact": {}
  },
  "tags": [],
  "servers": [
    {
      "url": "/api"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearer": {
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "type": "http"
      }
    },
    "schemas": {
      "ResponseDto": {
        "type": "object",
        "properties": {
          "code": {
            "type": "number",
            "example": 0,
            "description": "业务状态码，0 表示成功"
          },
          "msg": {
            "type": "string",
            "example": "success",
            "description": "提示信息"
          },
          "data": {
            "type": "object",
            "description": "返回数据"
          }
        },
        "required": [
          "code",
          "msg",
          "data"
        ]
      },
      "TokenUsageDto": {
        "type": "object",
        "properties": {
          "promptTokens": {
            "type": "number",
            "example": 25,
            "description": "输入提示的 token 数量"
          },
          "completionTokens": {
            "type": "number",
            "example": 150,
            "description": "生成的响应 token 数量"
          },
          "totalTokens": {
            "type": "number",
            "example": 175,
            "description": "总 token 数量"
          }
        },
        "required": [
          "promptTokens",
          "completionTokens",
          "totalTokens"
        ]
      },
      "ChatResponseDto": {
        "type": "object",
        "properties": {
          "content": {
            "type": "string",
            "example": "你好！我是AI助手，很高兴为您服务！",
            "description": "AI 生成的回复内容"
          },
          "usage": {
            "description": "Token 使用统计",
            "allOf": [
              {
                "$ref": "#/components/schemas/TokenUsageDto"
              }
            ]
          },
          "model": {
            "type": "string",
            "example": "gemini-2.5-flash",
            "description": "使用的模型名称"
          },
          "responseTime": {
            "type": "number",
            "example": 1200,
            "description": "响应耗时（毫秒）"
          }
        },
        "required": [
          "content",
          "usage",
          "model",
          "responseTime"
        ]
      },
      "ChatMessageParamsDto": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "example": "你好世界",
            "description": "用户输入的消息文本"
          }
        },
        "required": [
          "message"
        ]
      },
      "StreamChatResponseDto": {
        "type": "object",
        "properties": {
          "content": {
            "type": "string",
            "example": "你好！我是AI助手，很高兴为您服务！",
            "description": "AI 生成的部分回复内容"
          },
          "usage": {
            "description": "当前 Token 使用统计（流式中可能为估算值）",
            "allOf": [
              {
                "$ref": "#/components/schemas/TokenUsageDto"
              }
            ]
          },
          "model": {
            "type": "string",
            "example": "gemini-2.5-flash",
            "description": "使用的模型名称"
          },
          "responseTime": {
            "type": "number",
            "example": 1200,
            "description": "当前响应耗时（毫秒）"
          },
          "isComplete": {
            "type": "boolean",
            "example": false,
            "description": "是否为最后一个响应块"
          }
        },
        "required": [
          "content",
          "usage",
          "model",
          "responseTime",
          "isComplete"
        ]
      },
      "ChatStreamRequestDto": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "example": "你好世界",
            "description": "流式输出的消息文本"
          }
        },
        "required": [
          "message"
        ]
      },
      "GenerateVoiceRequestDto": {
        "type": "object",
        "properties": {
          "text": {
            "type": "string",
            "example": "你好，欢迎使用文本转语音服务！",
            "description": "要转换为语音的文本内容"
          },
          "voiceName": {
            "type": "string",
            "example": "Kore",
            "description": "语音名称，支持的语音取决于提供商",
            "enum": [
              "Kore",
              "Puck",
              "Charon",
              "Fenrir",
              "Aoede"
            ]
          },
          "outputFile": {
            "type": "string",
            "example": "out.wav",
            "description": "输出文件名（包含文件扩展名）"
          },
          "provider": {
            "type": "string",
            "description": "TTS 提供商",
            "example": "gemini",
            "enum": [
              "gemini",
              "minimax"
            ],
            "default": "gemini"
          }
        },
        "required": [
          "text",
          "provider"
        ]
      },
      "OpenAIChatRequestDto": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "example": "你好，请介绍一下你自己",
            "description": "用户输入的消息文本"
          }
        },
        "required": [
          "message"
        ]
      },
      "Object": {
        "type": "object",
        "properties": {}
      },
      "VertexAITSResponseDto": {
        "type": "object",
        "properties": {
          "audioUrl": {
            "type": "string",
            "example": "https://your-bucket.oss-region.aliyuncs.com/audio/2025-12-04/output.wav",
            "description": "生成的语音文件访问地址"
          },
          "voiceName": {
            "type": "string",
            "example": "cm-CN-Wavenet-A",
            "description": "使用的语音名称"
          },
          "characterCount": {
            "type": "number",
            "example": 42,
            "description": "文本字符数"
          },
          "generationTime": {
            "type": "number",
            "example": 1500,
            "description": "生成耗时（毫秒）"
          },
          "sampleRate": {
            "type": "number",
            "example": 32000,
            "description": "音频采样率"
          }
        },
        "required": [
          "audioUrl",
          "voiceName",
          "characterCount",
          "generationTime",
          "sampleRate"
        ]
      },
      "VertexAiTTSRequestDto": {
        "type": "object",
        "properties": {
          "text": {
            "type": "string",
            "example": "你好，欢迎使用 VertexAI 语音合成服务！",
            "description": "要转换为语音的文本内容"
          },
          "voiceName": {
            "type": "string",
            "example": "cm-CN-Wavenet-A",
            "description": "语音名称，支持 Standard 和 WaveNet 语音"
          },
          "languageCode": {
            "type": "string",
            "example": "zh-CN",
            "description": "语言代码"
          },
          "speakingRate": {
            "type": "number",
            "example": 1,
            "description": "语音语速 (0.25 - 4.0)"
          },
          "pitch": {
            "type": "number",
            "example": 0,
            "description": "音调 (-20.0 - 20.0)"
          },
          "outputFile": {
            "type": "string",
            "example": "output.wav",
            "description": "输出文件名"
          }
        },
        "required": [
          "text"
        ]
      },
      "MetaDto": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "description": "页面标题"
          },
          "icon": {
            "type": "string",
            "description": "图标",
            "nullable": true
          },
          "noCache": {
            "type": "boolean",
            "description": "是否缓存",
            "default": false
          },
          "breadcrumb": {
            "type": "boolean",
            "description": "是否显示面包屑",
            "default": true
          },
          "affix": {
            "type": "boolean",
            "description": "是否固定标签页",
            "default": false
          },
          "hidden": {
            "type": "boolean",
            "description": "是否隐藏菜单",
            "default": false
          },
          "noTagsView": {
            "type": "boolean",
            "description": "是否禁用标签页",
            "default": false
          },
          "activeMenu": {
            "type": "string",
            "description": "激活菜单",
            "nullable": true
          },
          "canTo": {
            "type": "boolean",
            "description": "是否可以跳转",
            "default": false
          },
          "permissionList": {
            "description": "权限列表",
            "default": [],
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "title",
          "noCache",
          "breadcrumb",
          "affix",
          "hidden",
          "noTagsView",
          "canTo",
          "permissionList"
        ]
      },
      "MenuItemDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number",
            "description": "菜单ID"
          },
          "parentId": {
            "type": "number",
            "description": "父菜单ID"
          },
          "path": {
            "type": "string",
            "description": "路由路径"
          },
          "component": {
            "type": "string",
            "description": "组件路径或标识"
          },
          "redirect": {
            "type": "string",
            "description": "重定向地址",
            "nullable": true
          },
          "name": {
            "type": "string",
            "description": "路由名称"
          },
          "meta": {
            "description": "路由元信息",
            "allOf": [
              {
                "$ref": "#/components/schemas/MetaDto"
              }
            ]
          },
          "permission": {
            "description": "权限",
            "default": [],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "children": {
            "description": "子菜单",
            "default": [],
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MenuItemDto"
            }
          }
        },
        "required": [
          "id",
          "parentId",
          "path",
          "component",
          "name",
          "meta",
          "permission",
          "children"
        ]
      },
      "TaskExecuteDto": {
        "type": "object",
        "properties": {
          "totalTasks": {
            "type": "number",
            "description": "执行任务的总数"
          },
          "schemeId": {
            "type": "number",
            "description": "当前执行的方案id"
          }
        },
        "required": [
          "totalTasks",
          "schemeId"
        ]
      },
      "TranslationDto": {
        "type": "object",
        "properties": {
          "begin": {
            "type": "string",
            "description": "开头文本",
            "example": "Hello"
          },
          "middle": {
            "type": "string",
            "description": "中间文本",
            "example": "world"
          },
          "end": {
            "type": "string",
            "description": "结尾文本",
            "example": "!"
          }
        },
        "required": [
          "begin",
          "middle",
          "end"
        ]
      },
      "ActualSchemeDto": {
        "type": "object",
        "properties": {
          "translation": {
            "description": "翻译内容",
            "allOf": [
              {
                "$ref": "#/components/schemas/TranslationDto"
              }
            ]
          }
        },
        "required": [
          "translation"
        ]
      },
      "CreateTtsTaskDto": {
        "type": "object",
        "properties": {
          "schemeId": {
            "type": "number",
            "description": "方案 ID",
            "example": 1
          },
          "actualScheme": {
            "description": "实际方案数组",
            "example": [
              {
                "translation": {
                  "begin": "Hello",
                  "middle": "world",
                  "end": "!"
                }
              },
              {
                "translation": {
                  "begin": "Good",
                  "middle": "morning",
                  "end": "."
                }
              }
            ],
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ActualSchemeDto"
            }
          },
          "voiceName": {
            "type": "string",
            "description": "语音模型名称",
            "example": "Kore",
            "default": "Kore"
          },
          "provider": {
            "type": "string",
            "description": "AI模型名称",
            "example": "Gemini"
          }
        },
        "required": [
          "schemeId",
          "actualScheme",
          "voiceName",
          "provider"
        ]
      },
      "UpdateTtsTaskItemDto": {
        "type": "object",
        "properties": {
          "schemeIndex": {
            "type": "number",
            "description": "方案中的片段索引（从0开始）"
          },
          "segmentKey": {
            "type": "string",
            "description": "片段 key",
            "enum": [
              "begin",
              "middle",
              "end"
            ]
          },
          "newText": {
            "type": "string",
            "description": "新的翻译文案"
          }
        },
        "required": [
          "schemeIndex",
          "segmentKey",
          "newText"
        ]
      },
      "UpdateTtsTasksDto": {
        "type": "object",
        "properties": {
          "schemeId": {
            "type": "number",
            "description": "方案 ID"
          },
          "updates": {
            "description": "要更新的任务列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UpdateTtsTaskItemDto"
            }
          }
        },
        "required": [
          "schemeId",
          "updates"
        ]
      },
      "ChineseNarrationDto": {
        "type": "object",
        "properties": {
          "begin": {
            "type": "string",
            "description": "begin 段中文内容"
          },
          "middle": {
            "type": "string",
            "description": "middle 段中文内容"
          },
          "end": {
            "type": "string",
            "description": "end 段中文内容"
          }
        },
        "required": [
          "begin",
          "middle",
          "end"
        ]
      },
      "UsedSegmentDto": {
        "type": "object",
        "properties": {
          "segUid": {
            "type": "string",
            "description": "使用的分段 UID，例如 \"1+2+3\""
          },
          "time": {
            "type": "string",
            "description": "对应每段音频时间，例如 \"18秒,17秒,9秒\""
          }
        },
        "required": [
          "segUid",
          "time"
        ]
      },
      "SchemeContentDto": {
        "type": "object",
        "properties": {
          "chineseNarration": {
            "description": "中文叙述内容",
            "allOf": [
              {
                "$ref": "#/components/schemas/ChineseNarrationDto"
              }
            ]
          },
          "chineseWordCount": {
            "type": "string",
            "description": "中文总字数"
          },
          "combinationContent": {
            "type": "string",
            "description": "组合内容描述"
          },
          "combinationEmotion": {
            "type": "string",
            "description": "组合情绪"
          },
          "combinationLogic": {
            "type": "string",
            "description": "组合逻辑描述"
          },
          "planNumber": {
            "type": "string",
            "description": "方案编号"
          },
          "title": {
            "type": "string",
            "description": "标题"
          },
          "translation": {
            "description": "英文翻译",
            "allOf": [
              {
                "$ref": "#/components/schemas/TranslationDto"
              }
            ]
          },
          "usedSegment": {
            "description": "已使用的分段信息",
            "allOf": [
              {
                "$ref": "#/components/schemas/UsedSegmentDto"
              }
            ]
          },
          "videoDurationSeconds": {
            "type": "string",
            "description": "视频总时长（秒）"
          }
        },
        "required": [
          "chineseNarration",
          "chineseWordCount",
          "combinationContent",
          "combinationEmotion",
          "combinationLogic",
          "planNumber",
          "title",
          "translation",
          "usedSegment",
          "videoDurationSeconds"
        ]
      },
      "AudioUrlDto": {
        "type": "object",
        "properties": {
          "beginAudioUrl": {
            "type": "string",
            "description": "begin 段音频 URL"
          },
          "middleAudioUrl": {
            "type": "string",
            "description": "middle 段音频 URL"
          },
          "endAudioUrl": {
            "type": "string",
            "description": "end 段音频 URL"
          }
        },
        "required": [
          "beginAudioUrl",
          "middleAudioUrl",
          "endAudioUrl"
        ]
      },
      "DownloadContentDto": {
        "type": "object",
        "properties": {
          "planNumber": {
            "type": "string",
            "description": "方案编号"
          },
          "schemeContent": {
            "description": "方案内容",
            "allOf": [
              {
                "$ref": "#/components/schemas/SchemeContentDto"
              }
            ]
          },
          "audioUrl": {
            "description": "音频 URL 对象",
            "allOf": [
              {
                "$ref": "#/components/schemas/AudioUrlDto"
              }
            ]
          }
        },
        "required": [
          "planNumber",
          "schemeContent",
          "audioUrl"
        ]
      },
      "SegmentDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "唯一 ID"
          },
          "schemeId": {
            "type": "string",
            "description": "方案 ID"
          },
          "schemeIndex": {
            "type": "number",
            "description": "方案索引"
          },
          "segmentKey": {
            "type": "string",
            "description": "分段 key，例如 begin/middle/end"
          },
          "textContent": {
            "type": "string",
            "description": "文本内容"
          },
          "audioUrl": {
            "type": "string",
            "description": "音频 URL"
          },
          "status": {
            "type": "number",
            "description": "状态，1 成功、0 待处理、2 失败"
          },
          "retryCount": {
            "type": "number",
            "description": "当前重试次数"
          },
          "maxRetry": {
            "type": "number",
            "description": "最大重试次数"
          },
          "errorLog": {
            "type": "string",
            "description": "错误日志",
            "nullable": true
          },
          "createTime": {
            "type": "string",
            "description": "创建时间"
          },
          "updateTime": {
            "type": "string",
            "description": "更新时间"
          },
          "voiceName": {
            "type": "string",
            "description": "使用的声音名称"
          },
          "downloadContent": {
            "description": "下载内容数组",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DownloadContentDto"
            }
          }
        },
        "required": [
          "id",
          "schemeId",
          "schemeIndex",
          "segmentKey",
          "textContent",
          "audioUrl",
          "status",
          "retryCount",
          "maxRetry",
          "errorLog",
          "createTime",
          "updateTime",
          "voiceName",
          "downloadContent"
        ]
      },
      "StatsDto": {
        "type": "object",
        "properties": {
          "success": {
            "type": "number",
            "description": "成功数量"
          },
          "failed": {
            "type": "number",
            "description": "失败数量"
          },
          "unfinished": {
            "type": "number",
            "description": "未完成数量"
          },
          "total": {
            "type": "number",
            "description": "总数"
          }
        },
        "required": [
          "success",
          "failed",
          "unfinished",
          "total"
        ]
      },
      "OverallResponseDto": {
        "type": "object",
        "properties": {
          "overall": {
            "type": "string",
            "description": "总体状态，例如 success/fail"
          },
          "stats": {
            "description": "统计信息",
            "allOf": [
              {
                "$ref": "#/components/schemas/StatsDto"
              }
            ]
          }
        },
        "required": [
          "overall",
          "stats"
        ]
      },
      "FailedIndexDto": {
        "type": "object",
        "properties": {
          "schemeIndex": {
            "type": "number",
            "description": "方案索引",
            "example": 0
          },
          "segmentKey": {
            "type": "string",
            "description": "片段 key",
            "enum": [
              "begin",
              "middle",
              "end"
            ],
            "example": "begin"
          }
        },
        "required": [
          "schemeIndex",
          "segmentKey"
        ]
      },
      "RetryFailedIndexesDto": {
        "type": "object",
        "properties": {
          "schemeId": {
            "type": "number",
            "description": "方案 ID",
            "example": 1
          },
          "failedIndexes": {
            "description": "失败的任务索引",
            "example": [
              {
                "schemeIndex": 0,
                "segmentKey": "begin"
              },
              {
                "schemeIndex": 1,
                "segmentKey": "end"
              }
            ],
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FailedIndexDto"
            }
          },
          "voiceName": {
            "type": "string",
            "description": "语音模型名称",
            "example": "Kore",
            "default": "Kore"
          },
          "provider": {
            "type": "string",
            "description": "AI模型名称",
            "example": "Gemini"
          }
        },
        "required": [
          "schemeId",
          "failedIndexes",
          "voiceName",
          "provider"
        ]
      },
      "UploadFileResponseDto": {
        "type": "object",
        "properties": {
          "url": {
            "type": "string",
            "example": "https://your-bucket.oss-cn-shanghai.aliyuncs.com/uploads/1692612345678-test.png",
            "description": "文件访问 URL"
          },
          "name": {
            "type": "string",
            "example": "uploads/1692612345678-test.png",
            "description": "OSS 文件路径（key）"
          }
        },
        "required": [
          "url",
          "name"
        ]
      },
      "UploadFileDto": {
        "type": "object",
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "description": "待上传文件"
          }
        },
        "required": [
          "file"
        ]
      }
    }
  }
}